<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>إدارة الشارات المميزة</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .badge-icon-option { width: 32px; height: 32px; display: inline-block; vertical-align: middle; margin-left: 6px; }
        .badge-list-item { display: flex; align-items: center; gap: 10px; padding: 7px 0; border-bottom: 1px solid #eee; }
.toggle-active-btn.black-active {
  background: #111;
  color: #fff;
  border: 1px solid #111;
}
.toggle-active-btn.black-inactive {
  background: #fff;
  color: #111;
  border: 1px solid #111;
}
.toggle-active-btn.black-active:focus, .toggle-active-btn.black-inactive:focus {
  outline: 2px solid #111;
}
        .dropdown-menu-custom .dropdown-item span svg {
            vertical-align: middle;
        }
        #selectedIconPreview svg {
            vertical-align: middle;
        }
        .custom-dropdown { position: relative; width: 100%; }
        .dropdown-toggle-btn { background: #fff; border: 1px solid #ced4da; border-radius: 0.375rem; padding: 0.375rem 0.75rem; min-height: 38px; cursor: pointer; }
        .dropdown-toggle-btn:focus { outline: 2px solid #198754; }
        .dropdown-menu-custom { list-style: none; }
    </style>
</head>
<body>
<div class="container py-5">
    <a href="/dashboard" class="btn btn-outline-primary mb-3" style="float: left;">العودة إلى لوحة التحكم</a>
    <h2 class="mb-4">إدارة الشارات المميزة</h2>
    <form id="add-badge-form" class="row g-3 mb-4">
    <div class="col-md-4">
        <input type="text" class="form-control" id="badgeName" placeholder="اسم الشارة" required>
    </div>
    <div class="col-md-3">
        <select id="iconType" class="form-select" required>
            <option value="key">مفتاح أيقونة (افتراضي)</option>
            <option value="svg">SVG</option>
            <option value="url">رابط صورة</option>
        </select>
    </div>
    <div class="col-md-3" id="iconValueInputContainer">
        <!-- JS will show/hide the correct input here -->
        <div id="iconValue_key" style="display:block;">
            <div id="iconDropdown" class="custom-dropdown" tabindex="0">
                <div class="dropdown-toggle-btn d-flex align-items-center justify-content-between" id="dropdownMenuButton">
                    <span id="selectedIconPreview">اختر الأيقونة</span>
                    <span class="caret">▼</span>
                </div>
                <ul class="dropdown-menu-custom" id="iconDropdownMenu" style="max-height:220px;overflow-y:auto;display:none;position:absolute;width:100%;z-index:10;background:#fff;border:1px solid #ccc;padding:0;margin-top:2px;"></ul>
                <input type="hidden" id="badgeIcon" required>
            </div>
        </div>
        <div id="iconValue_svg" style="display:none;">
            <textarea id="badgeSVG" class="form-control" placeholder="ألصق كود SVG هنا"></textarea>
        </div>
        <div id="iconValue_url" style="display:none;">
            <input type="url" id="badgeURL" class="form-control" placeholder="رابط صورة الأيقونة">
        </div>
    </div>
    <div class="col-md-2">
        <button type="submit" class="btn btn-success w-100">إضافة شارة</button>
    </div>
</form>
    <div class="card">
        <div class="card-header">الشارات المضافة</div>
        <ul class="list-group list-group-flush" id="badgeList"></ul>
    </div>
    
    
    <!-- Edit Badge Modal -->
    <div class="modal fade" id="editBadgeModal" tabindex="-1" aria-labelledby="editBadgeModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="editBadgeModalLabel">تعديل الشارة</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="إغلاق"></button>
          </div>
          <div class="modal-body">
            <form id="edit-badge-form">
    <div class="mb-3">
        <label for="editBadgeName" class="form-label">اسم الشارة</label>
        <input type="text" class="form-control" id="editBadgeName" required>
    </div>
    <div class="mb-3">
        <label class="form-label">نوع الأيقونة</label>
        <select id="editIconType" class="form-select" required>
            <option value="key">مفتاح أيقونة (افتراضي)</option>
            <option value="svg">SVG</option>
            <option value="url">رابط صورة</option>
        </select>
    </div>
    <div class="mb-3" id="editIconValueInputContainer">
        <div id="editIconValue_key" style="display:block;">
            <div id="editIconDropdown" class="custom-dropdown" tabindex="0">
                <div class="dropdown-toggle-btn d-flex align-items-center justify-content-between" id="editDropdownMenuButton">
                    <span id="editSelectedIconPreview">اختر الأيقونة</span>
                    <span class="caret">▼</span>
                </div>
                <ul class="dropdown-menu-custom" id="editIconDropdownMenu" style="max-height:220px;overflow-y:auto;display:none;position:absolute;width:100%;z-index:10;background:#fff;border:1px solid #ccc;padding:0;margin-top:2px;"></ul>
                <input type="hidden" id="editBadgeIcon" required>
            </div>
        </div>
        <div id="editIconValue_svg" style="display:none;">
            <textarea id="editBadgeSVG" class="form-control" placeholder="ألصق كود SVG هنا"></textarea>
        </div>
        <div id="editIconValue_url" style="display:none;">
            <input type="url" id="editBadgeURL" class="form-control" placeholder="رابط صورة الأيقونة">
        </div>
    </div>
    <input type="hidden" id="editBadgeId">
    <button type="submit" class="btn btn-success w-100">حفظ التعديلات</button>
</form>
          </div>
        </div>
      </div>
    </div>
</div>
<script>
// 30 beautiful SVG badge icons for Super Badges (unique from student abilities)
const svgIcons = [
  {key:'star',svg:`<svg width='32' height='32' viewBox='0 0 24 24'><path fill='#FFD600' d='M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z'/></svg>`},
  {key:'medal',svg:`<svg width='32' height='32' viewBox='0 0 24 24'><circle cx='12' cy='8' r='6' fill='#FFD600'/><rect x='9' y='14' width='6' height='8' fill='#BCA873'/></svg>`},
  {key:'trophy',svg:`<svg width='32' height='32' viewBox='0 0 24 24'><rect x='6' y='19' width='12' height='2' fill='#BCA873'/><rect x='8' y='17' width='8' height='2' fill='#FFD600'/><ellipse cx='12' cy='10' rx='8' ry='6' fill='#FFD600' stroke='#BCA873' stroke-width='2'/></svg>`},
  {key:'rocket',svg:`<svg width='32' height='32' viewBox='0 0 24 24'><path fill='#90caf9' d='M2 17l2.5-2.5 3 3L5 20l-3-3z'/><path fill='#1976d2' d='M12 2l4 4-7.5 7.5-4-4z'/><circle cx='17' cy='7' r='2' fill='#ffd700'/></svg>`},
  {key:'crown',svg:`<svg width='32' height='32' viewBox='0 0 24 24'><path fill='#FFD700' d='M2 12l5 5 5-9 5 9 5-5-5 10H7z'/></svg>`},
  {key:'book',svg:`<svg width='32' height='32' viewBox='0 0 24 24'><rect x='3' y='4' width='7' height='16' fill='#81d4fa'/><rect x='14' y='4' width='7' height='16' fill='#ffd700'/></svg>`},
  {key:'lightbulb',svg:`<svg width='32' height='32' viewBox='0 0 24 24'><circle cx='12' cy='10' r='6' fill='#ffd700'/><rect x='10' y='16' width='4' height='4' fill='#bca873'/></svg>`},
  {key:'heart',svg:`<svg width='32' height='32' viewBox='0 0 24 24'><path fill='#ff5252' d='M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41 0.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z'/></svg>`},
  {key:'ribbon',svg:`<svg width='32' height='32' viewBox='0 0 24 24'><circle cx='12' cy='8' r='6' fill='#ffd700'/><rect x='10' y='14' width='4' height='8' fill='#bca873'/></svg>`},
  {key:'smile',svg:`<svg width='32' height='32' viewBox='0 0 24 24'><circle cx='12' cy='12' r='10' fill='#ffd700'/><path d='M8 15a4 4 0 0 0 8 0' stroke='#bca873' stroke-width='2' fill='none'/></svg>`},
  {key:'diamond',svg:`<svg width='32' height='32' viewBox='0 0 24 24'><polygon fill='#00bcd4' points='12,2 22,9 12,22 2,9'/></svg>`},
  {key:'fire',svg:`<svg width='32' height='32' viewBox='0 0 24 24'><path fill='#ff7043' d='M12 2C10 7 7 10 7 14a5 5 0 0 0 10 0c0-4-3-7-5-12z'/></svg>`},
  {key:'leaf',svg:`<svg width='32' height='32' viewBox='0 0 24 24'><path fill='#66bb6a' d='M12 2C7 7 2 12 12 22c10-10 5-15 0-20z'/></svg>`},
  {key:'music',svg:`<svg width='32' height='32' viewBox='0 0 24 24'><circle cx='8' cy='19' r='3' fill='#7e57c2'/><rect x='10' y='3' width='8' height='2' fill='#7e57c2'/><rect x='10' y='5' width='2' height='12' fill='#7e57c2'/></svg>`},
  {key:'palette',svg:`<svg width='32' height='32' viewBox='0 0 24 24'><ellipse cx='12' cy='12' rx='10' ry='8' fill='#ffd54f'/><circle cx='7' cy='10' r='1' fill='#e57373'/><circle cx='12' cy='8' r='1' fill='#81c784'/><circle cx='17' cy='10' r='1' fill='#64b5f6'/></svg>`},
  {key:'puzzle',svg:`<svg width='32' height='32' viewBox='0 0 24 24'><rect x='2' y='2' width='20' height='20' rx='5' fill='#ffb300'/><circle cx='12' cy='12' r='4' fill='#fff'/></svg>`},
  {key:'rocket2',svg:`<svg width='32' height='32' viewBox='0 0 24 24'><path fill='#90caf9' d='M2 17l2.5-2.5 3 3L5 20l-3-3z'/><path fill='#1976d2' d='M12 2l4 4-7.5 7.5-4-4z'/><circle cx='17' cy='7' r='2' fill='#ffd700'/></svg>`},
  {key:'shield',svg:`<svg width='32' height='32' viewBox='0 0 24 24'><path fill='#90caf9' d='M12 2l7 7v5c0 5-7 9-7 9s-7-4-7-9V9z'/></svg>`},
  {key:'star2',svg:`<svg width='32' height='32' viewBox='0 0 24 24'><polygon fill='#ffd600' points='12,2 15,10 23,10 17,14 19,22 12,17 5,22 7,14 1,10 9,8'/></svg>`},
  {key:'target',svg:`<svg width='32' height='32' viewBox='0 0 24 24'><circle cx='12' cy='12' r='10' fill='#e57373'/><circle cx='12' cy='12' r='6' fill='#fff'/><circle cx='12' cy='12' r='2' fill='#e57373'/></svg>`},
  {key:'tree',svg:`<svg width='32' height='32' viewBox='0 0 24 24'><rect x='10' y='15' width='4' height='5' fill='#8d6e63'/><circle cx='12' cy='10' r='6' fill='#66bb6a'/></svg>`},
  {key:'umbrella',svg:`<svg width='32' height='32' viewBox='0 0 24 24'><path fill='#64b5f6' d='M12 2C6 2 2 7 2 12h20c0-5-4-10-10-10z'/><rect x='11' y='12' width='2' height='8' fill='#bca873'/></svg>`},
  {key:'wings',svg:`<svg width='32' height='32' viewBox='0 0 24 24'><path fill='#b3e5fc' d='M2 12c3 0 7 6 10 6s7-6 10-6'/></svg>`},
  {key:'zap',svg:`<svg width='32' height='32' viewBox='0 0 24 24'><polygon fill='#ffd600' points='13,2 2,14 12,14 11,22 22,10 12,10'/></svg>`},
  {key:'medal2',svg:`<svg width='32' height='32' viewBox='0 0 24 24'><circle cx='12' cy='8' r='6' fill='#ffd700'/><rect x='9' y='14' width='6' height='8' fill='#90caf9'/></svg>`},
  {key:'star3',svg:`<svg width='32' height='32' viewBox='0 0 24 24'><polygon fill='#ffd600' points='12,2 14,8 20,8 15,12 17,18 12,14 7,18 9,12 4,8 10,8'/></svg>`},
  {key:'cup',svg:`<svg width='32' height='32' viewBox='0 0 24 24'><rect x='6' y='19' width='12' height='2' fill='#ffb300'/><rect x='8' y='17' width='8' height='2' fill='#ffd600'/><ellipse cx='12' cy='10' rx='8' ry='6' fill='#ffd600' stroke='#ffb300' stroke-width='2'/></svg>`},
  {key:'badge',svg:`<svg width='32' height='32' viewBox='0 0 24 24'><circle cx='12' cy='12' r='10' fill='#ffd54f'/><polygon points='12,2 15,8 22,9 17,14 18,21 12,18 6,21 7,14 2,9 9,8' fill='#fffde7'/></svg>`},
  {key:'award',svg:`<svg width='32' height='32' viewBox='0 0 24 24'><circle cx='12' cy='8' r='6' fill='#ffd54f'/><rect x='10' y='14' width='4' height='8' fill='#ffb300'/></svg>`},
  {key:'gem',svg:`<svg width='32' height='32' viewBox='0 0 24 24'><polygon fill='#00bcd4' points='12,2 22,9 12,22 2,9'/><polygon fill='#b2ebf2' points='12,2 17,9 12,22 7,9'/></svg>`},
  {key:'star4',svg:`<svg width='32' height='32' viewBox='0 0 24 24'><polygon fill='#ffd600' points='12,2 13.5,8 20,8 15.5,12 17,18 12,14 7,18 8.5,12 4,8 10.5,8'/></svg>`}
];

// Custom icon dropdown logic (pure JS)
(function() {
    const iconDropdown = document.getElementById('iconDropdown');
    const iconDropdownMenu = document.getElementById('iconDropdownMenu');
    const selectedIconPreview = document.getElementById('selectedIconPreview');
    const badgeIconInput = document.getElementById('badgeIcon');
    iconDropdownMenu.innerHTML = '';
    svgIcons.forEach(icon => {
        const li = document.createElement('li');
        li.className = 'dropdown-item d-flex align-items-center';
        li.style.cursor = 'pointer';
        li.innerHTML = `<span style='width:32px;display:inline-block;'>${icon.svg}</span>`;
        li.onclick = function(e) {
            e.stopPropagation();
            selectedIconPreview.innerHTML = icon.svg;
            badgeIconInput.value = icon.key;
            iconDropdownMenu.style.display = 'none';
        };
        iconDropdownMenu.appendChild(li);
    });
    iconDropdown.querySelector('.dropdown-toggle-btn').onclick = function(e) {
        e.stopPropagation();
        iconDropdownMenu.style.display = iconDropdownMenu.style.display === 'block' ? 'none' : 'block';
    };
    document.addEventListener('click', function(e) {
        iconDropdownMenu.style.display = 'none';
    });
    iconDropdown.onkeydown = function(e) {
        if (e.key === 'Escape') iconDropdownMenu.style.display = 'none';
    };
})();

// Form validation: require icon selection
const badgeForm = document.getElementById('add-badge-form');
badgeForm.addEventListener('submit', function(e) {
    e.preventDefault();
    const badgeNameInput = document.getElementById('badgeName');
    const name = badgeNameInput.value.trim();
    let icon_type = document.getElementById('iconType').value;
    let icon_value = '';
    // --- ALWAYS: If iconType is 'key', forcibly convert to SVG before submission ---
    if (icon_type === 'key') {
        const key = document.getElementById('badgeIcon').value;
        const iconObj = svgIcons.find(i => i.key === key);
        if (iconObj && iconObj.svg) {
            icon_type = 'svg';
            icon_value = iconObj.svg;
        } else {
            icon_value = '';
        }
    } else if (icon_type === 'svg') {
        icon_value = document.getElementById('badgeSVG').value.trim();
    } else if (icon_type === 'url') {
        icon_value = document.getElementById('badgeURL').value.trim();
    }
    // Defensive: Never allow icon_type 'key' to be sent to the backend
    if (icon_type === 'key') {
        alert('خطأ: لم يتم تحويل الأيقونة إلى SVG. يرجى إعادة المحاولة أو التواصل مع الدعم.');
        return;
    }
    if (!name || !icon_value) return;

    fetch('/api/super_badges', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({name, icon_type, icon_value})
    })
    .then(r => r.json())
    .then(() => {
        badgeNameInput.value = '';
        document.getElementById('badgeIcon').value = '';
        document.getElementById('badgeSVG').value = '';
        document.getElementById('badgeURL').value = '';
        document.getElementById('selectedIconPreview').innerHTML = 'اختر الأيقونة';
        updateBadgeList();
    });
});

// Render badge list
function updateBadgeList() {
    fetch('/api/super_badges').then(r => r.json()).then(badges => {
        console.log('Fetched badges:', badges); // Debug: log all badge data
        const badgeList = document.getElementById('badgeList');
        badgeList.innerHTML = '';
        badges.forEach(badge => {
            let icon = '?';
            if (badge.icon_type === 'svg' && badge.icon_value && badge.icon_value.trim().startsWith('<svg')) {
                icon = badge.icon_value;
            } else if (badge.icon_type === 'url' && badge.icon_value && (badge.icon_value.startsWith('http://') || badge.icon_value.startsWith('https://'))) {
                icon = `<img src="${badge.icon_value}" alt="${badge.name}" style="width:32px;height:32px;object-fit:contain;">`;
            } else if (badge.icon_type === 'key' && badge.icon_value) {
                const iconObj = svgIcons.find(i => i.key === badge.icon_value);
                icon = iconObj ? iconObj.svg : '?';
            }
            const li = document.createElement('li');
            li.className = 'list-group-item badge-list-item';
            li.innerHTML = `
                <div class="d-flex justify-content-between align-items-center w-100">
                  <div class="d-flex align-items-center gap-2">
                    <span class="badge-icon-option">${icon}</span>
                    <span>${badge.name}</span>
                  </div>
                  <div class="d-flex align-items-center gap-2">
                    <button class="btn btn-sm btn-primary edit-badge-btn" data-id="${badge.id}">تعديل</button>
                    <button class="btn btn-sm btn-danger delete-badge-btn" data-id="${badge.id}">حذف</button>
                    <button class="btn btn-sm toggle-active-btn ${badge.active ? 'black-active' : 'black-inactive'}" data-id="${badge.id}" style="min-width: 90px;"
                      ${badge.active ? 'data-active="1"' : 'data-active="0"'}>
                      ${badge.active ? 'تعطيل' : 'تفعيل'}
                    </button>
                  </div>
                </div>
            `;
            badgeList.appendChild(li);
        });
        // Attach delete/edit handlers
        document.querySelectorAll('.delete-badge-btn').forEach(btn => {
            btn.onclick = function() {
                console.log('Delete clicked, badge id:', btn.dataset.id); // Debug: log id to be deleted
                if(confirm('هل أنت متأكد أنك تريد حذف هذه الشارة؟')) {
                    fetch(`/api/super_badges/${btn.dataset.id}`, {method:'DELETE'})
                        .then(r => r.json())
                        .then(() => updateBadgeList());
                }
            };
        });
        document.querySelectorAll('.edit-badge-btn').forEach(btn => {
            btn.onclick = function() {
                const badgeId = btn.dataset.id;
                fetch(`/api/super_badges/${badgeId}`)
                    .then(r => r.json())
                    .then(badge => {
                        document.getElementById('editBadgeId').value = badge.id;
                        document.getElementById('editBadgeName').value = badge.name;
                        document.getElementById('editIconType').value = badge.icon_type;
                        if (badge.icon_type === 'key') {
                            document.getElementById('editBadgeIcon').value = badge.icon_value;
                        } else if (badge.icon_type === 'svg') {
                            document.getElementById('editBadgeSVG').value = badge.icon_value;
                        } else if (badge.icon_type === 'url') {
                            document.getElementById('editBadgeURL').value = badge.icon_value;
                        }
                        // Update icon preview in modal
                        const iconObj = svgIcons.find(i => i.key === badge.icon_value);
                        document.getElementById('editSelectedIconPreview').innerHTML = iconObj ? iconObj.svg : '?';
                        // Show modal
                        var modal = new bootstrap.Modal(document.getElementById('editBadgeModal'));
                        modal.show();
                    });
            };
        });
        // Attach activate/deactivate handlers
        document.querySelectorAll('.toggle-active-btn').forEach(btn => {
            btn.onclick = function() {
                const badgeId = btn.dataset.id;
                const isActive = btn.getAttribute('data-active') === '1';
                fetch(`/api/super_badges/${badgeId}/active`, {
                    method: 'PATCH',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({active: !isActive})
                })
                .then(r => r.json())
                .then(() => updateBadgeList());
            };
        });
    });
}

document.addEventListener('DOMContentLoaded', function() {
    updateBadgeList();
});

// Edit badge icon dropdown logic (same as add)
(function() {
    const editIconDropdown = document.getElementById('editIconDropdown');
    const editIconDropdownMenu = document.getElementById('editIconDropdownMenu');
    const editSelectedIconPreview = document.getElementById('editSelectedIconPreview');
    const editBadgeIconInput = document.getElementById('editBadgeIcon');
    svgIcons.forEach(icon => {
        const li = document.createElement('li');
        li.className = 'dropdown-item d-flex align-items-center';
        li.style.cursor = 'pointer';
        li.innerHTML = `<span style='width:32px;display:inline-block;'>${icon.svg}</span>`;
        li.onclick = function(e) {
            e.stopPropagation();
            editSelectedIconPreview.innerHTML = icon.svg;
            editBadgeIconInput.value = icon.key;
            editIconDropdownMenu.style.display = 'none';
        };
        editIconDropdownMenu.appendChild(li);
    });
    editIconDropdown.querySelector('.dropdown-toggle-btn').onclick = function(e) {
        e.stopPropagation();
        editIconDropdownMenu.style.display = editIconDropdownMenu.style.display === 'block' ? 'none' : 'block';
    };
    document.addEventListener('click', function(e) {
        editIconDropdownMenu.style.display = 'none';
    });
    editIconDropdown.onkeydown = function(e) {
        if (e.key === 'Escape') editIconDropdownMenu.style.display = 'none';
    };
})();

// Edit badge form submit
const editBadgeForm = document.getElementById('edit-badge-form');
editBadgeForm.addEventListener('submit', function(e) {
    e.preventDefault();
    const id = document.getElementById('editBadgeId').value;
    const name = document.getElementById('editBadgeName').value.trim();
    let icon_type = document.getElementById('editIconType').value;
    let icon_value = '';
    if (icon_type === 'key') {
        const key = document.getElementById('editBadgeIcon').value;
        const iconObj = svgIcons.find(i => i.key === key);
        icon_value = iconObj ? iconObj.svg : '';
        // Force icon_type to 'svg' if key is used
        icon_type = 'svg';
    } else if (icon_type === 'svg') {
        icon_value = document.getElementById('editBadgeSVG').value.trim();
    } else if (icon_type === 'url') {
        icon_value = document.getElementById('editBadgeURL').value.trim();
    }
    if (!name || !icon_value) return;
    fetch(`/api/super_badges/${id}`, {
        method: 'PUT',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({name, icon_type, icon_value})
    })
    .then(r => r.json())
    .then(() => {
        var modal = bootstrap.Modal.getInstance(document.getElementById('editBadgeModal'));
        modal.hide();
        updateBadgeList();
    });
});

// --- Icon type dynamic input logic for add form ---
function updateIconValueInput() {
    const type = document.getElementById('iconType').value;
    document.getElementById('iconValue_key').style.display = type === 'key' ? 'block' : 'none';
    document.getElementById('iconValue_svg').style.display = type === 'svg' ? 'block' : 'none';
    document.getElementById('iconValue_url').style.display = type === 'url' ? 'block' : 'none';
}
document.getElementById('iconType').addEventListener('change', updateIconValueInput);

// --- Icon type dynamic input logic for edit form ---
function updateEditIconValueInput() {
    const type = document.getElementById('editIconType').value;
    document.getElementById('editIconValue_key').style.display = type === 'key' ? 'block' : 'none';
    document.getElementById('editIconValue_svg').style.display = type === 'svg' ? 'block' : 'none';
    document.getElementById('editIconValue_url').style.display = type === 'url' ? 'block' : 'none';
}

</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
